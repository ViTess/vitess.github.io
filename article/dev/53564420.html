<!DOCTYPE html><html class="has-navbar-fixed-top"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>The ABC of Dart Part 1 - Debug表演艺术家</title><meta name="description" content="ViTe&#39;s Blog"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="baidu-site-verification" content="05MX5vANvW"><link rel="stylesheet" href="//cdn.bootcss.com/outdated-browser/1.1.5/outdatedbrowser.min.css"><link rel="icon" href="https://vites.app/images/favicon.png"><script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script><link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet"><link rel="stylesheet" href="//fonts.lug.ustc.edu.cn/css?family=Ovo|Source+Code+Pro"><link rel="stylesheet" href="//cdn.bootcss.com/bulma/0.6.2/css/bulma.min.css"><link rel="stylesheet" href="//cdn.bootcss.com/lightgallery/1.6.10/css/lightgallery.min.css"><link rel="stylesheet" href="//cdn.bootcss.com/justifiedGallery/3.7.0/css/justifiedGallery.min.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="//use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous"><script src="//cdn.bootcss.com/moment.js/2.22.1/moment.min.js"></script><script>function setArticleTime(e,t){document.getElementsByClassName(e)[0].innerHTML=moment(t).fromNow()}!function(e,t){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?t(require("../moment")):"function"==typeof define&&define.amd?define(["../moment"],t):t(e.moment)}(this,function(e){"use strict";return e.defineLocale("zh-cn",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(e,t){return 12===e&&(e=0),"凌晨"===t||"早上"===t||"上午"===t?e:"下午"===t||"晚上"===t?e+12:11<=e?e:e+12},meridiem:function(e,t,d){var n=100*e+t;return n<600?"凌晨":n<900?"早上":n<1130?"上午":n<1230?"中午":n<1800?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:"[下]ddddLT",lastDay:"[昨天]LT",lastWeek:"[上]ddddLT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(日|月|周)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";case"M":return e+"月";case"w":case"W":return e+"周";default:return e}},relativeTime:{future:"%s内",past:"%s前",s:"几秒",ss:"%d 秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},week:{dow:1,doy:4}})})</script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?40c23cf929965ff7dcc44d0e695ed794";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script></head><body><nav class="navbar is-transparent is-fixed-top navbar-main" role="navigation" aria-label="main navigation"><div class="container"><div class="navbar-brand"> <a class="navbar-item" href="/" style="padding:0 3rem 0 1rem"><img src="/images/logo.png" alt=""></a><div class="navbar-burger"><span></span><span></span><span></span></div></div><div class="navbar-menu navbar-start"> <a class="navbar-item" href="/archives">Archives</a> <a class="navbar-item" href="/categories">Categories</a> <a class="navbar-item" href="/tags">Tags</a> <a class="navbar-item" href="/about">About</a></div><div class="navbar-menu navbar-end"><a class="navbar-item search" href="javascript:;"><i class="fas fa-search"></i></a><div class="navbar-item is-hoverable has-dropdown is-hidden-mobile is-hidden-tablet-only"><a class="navbar-item toc"><i class="fa fa-list"></i></a><div class="navbar-dropdown is-right"> <a class="navbar-item" href="#前言">1 前言</a><hr class="navbar-divider"> <a class="navbar-item" href="#Hello-World">2 Hello World!</a><hr class="navbar-divider"> <a class="navbar-item" href="#对象类型">3 对象类型</a> <a class="navbar-item" href="#Object">3.1 Object</a> <a class="navbar-item" href="#dynamic">3.2 dynamic</a> <a class="navbar-item" href="#var">3.3 var</a> <a class="navbar-item" href="#num">3.4 num</a> <a class="navbar-item" href="#String">3.5 String</a> <a class="navbar-item" href="#bool">3.6 bool</a><hr class="navbar-divider"> <a class="navbar-item" href="#const和final">4 const和final</a></div></div><a class="navbar-item" href="https://github.com/vitess"><i class="fab fa-github"></i></a><a class="navbar-item" href="https://weibo.com/2373803622"><i class="fab fa-weibo"></i></a><a class="navbar-item" href="mailto:vite@outlook.com"><i class="fa fa-envelope-square"></i></a></div></div></nav><section class="section"><div class="container"><article class="article content gallery" itemscope itemprop="blogPost"><h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name"> The ABC of Dart Part 1</h1><div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile"><span class="column is-narrow"><time class="article-time-53564420" datetime="2018-06-07T04:38:12.000Z" itemprop="datePublished"></time></span><span class="column is-narrow article-category"><i class="far fa-folder"></i> <a class="article-category-link" href="/categories/dev/">开发</a></span></div><div class="article-entry is-size-6-mobile" itemprop="articleBody"><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>近期对<code>Flutter</code>有兴趣，但这个东西要用<code>Dart</code>来写应用，只能先入门一下这门语言。</p><p>目前把基础看了一部分，总体而言，<code>Dart</code>和目前比较火热的<code>JavaScript</code>、<code>Kotlin</code>一样是一门脚本式语言，支持函数式编程，函数依然是第一公民，不过<code>Dart</code>对于对象的支持和定义更详细。另外，<code>Dart</code>运行在自己的<code>Dart VM</code>上，和其他的JVM语言不同，所以无论是使用<code>Flutter</code>或者是<code>Dart</code>，都需要先安装<code>Dart VM</code>。</p><p>至于IDE，我用的Android Studio，安装上<code>Dart</code>插件即可。</p><a id="more"></a><h1 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello World!"></a>Hello World!</h1><p>和C语言一样，<code>Dart</code>的程序入口在main函数：</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main()&#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Hello World"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>三行代码就可以在一个<code>*.dart</code>文件中运行，不需要import什么东西。</p><h1 id="对象类型"><a href="#对象类型" class="headerlink" title="对象类型"></a>对象类型</h1><p>之所以说是“对象类型”，是因为在<code>Dart</code>中一切皆为对象，只是针对不同的对象有不同的默认类型。因此，所有对象的默认值都为<code>null</code>，判空不用像js那么夸张了。</p><h2 id="Object"><a href="#Object" class="headerlink" title="Object"></a>Object</h2><p>先介绍<code>Object</code>，就如上面所说，一切类型都是<code>Object</code>或者<code>Object</code>派生的。如果点开<code>Dart</code>中的<code>object.dart</code>，第一句注释就是：</p><blockquote><p>The base class for all Dart objects.</p></blockquote><p>即所有类型都隐藏式继承了Object，如Java一样。</p><h2 id="dynamic"><a href="#dynamic" class="headerlink" title="dynamic"></a>dynamic</h2><p><code>dynamic</code>表示任意<strong>未知</strong>类型。注意<strong>未知</strong>这个词。在<code>Dart</code>中，<code>Object</code>和<code>dynamic</code>都能表示所有类型。关于这一点，刚开始接触时确实很困惑——既然<code>Object</code>已经能表示一切类型，那<code>dynamic</code>是用来干嘛的？</p><p>举个例子，我创建一个类ClassA，其中的有一个成员函数为a：</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ClassA</span></span>&#123;</span><br><span class="line">    <span class="keyword">void</span> a()&#123;</span><br><span class="line">        <span class="comment">//TODO</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我声明一个函数，叫做func1，假设函数定义如下：</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> func1(<span class="built_in">Object</span> object)&#123;</span><br><span class="line">    object.toString(); <span class="comment">//(1)</span></span><br><span class="line">    object.a();        <span class="comment">//(2)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>因为ClassA默认继承了<code>Object</code>，所以在给func1这个函数传参时，我们可以传入ClassA的实例。但是在编译时，编译器会报错，告诉我们第(2)行代码是不能编译过去的。因为函数func1声明了函数参数类型为<code>Object</code>，它只能调用<code>Object</code>的方法。</p><p>但如果我把func1的参数改为<code>dynamic</code>：</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> func1(<span class="keyword">dynamic</span> object)&#123;</span><br><span class="line">    object.toString(); <span class="comment">//(1)</span></span><br><span class="line">    object.a();        <span class="comment">//(2)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>此时编译器则可以编译运行。</p><p>为什么呢？前面已经说了，<code>Object</code>是所有类的基类，而<code>dynamic</code>代表任意<strong>未知</strong>类型。两者功能基本一样，但是当使用<code>dynamic</code>来声明参数时，你可以通过该参数调用任意函数或变量，而编译器不会报任何异常。因为<code>dynamic</code>修饰的变量在编译器眼中看来，它是属于<strong>未知</strong>的，编译器不知道这个变量是否真的有这个函数或者变量，所以编译器选择闭嘴。</p><p>所以什么时候应该显示声明参数为<code>dynamic</code>呢？比如说我有一个类ClassA和ClassB，它们是两个没有任何关系的类，但是它们有两个共同的函数a，那么函数func1就能接受ClassA和ClassB的实例并且在内部调用函数a，而编译器不会对此报错。</p><p>但是官方也说到，最好还是不要用这种方式，<code>dynamic</code>应该尽可能不用，因为它不会被编译器检查，这样会导致程序不安全，程序员看着也很难猜测这种参数是什么类型。毕竟动态语言太过于“动态”就很难看了。</p><p>值得一提，<code>Dart</code>的静态检查和动态检查都很优秀，语言虽然是动态的，但是写起来跟静态强类型的语言相差不大。</p><h2 id="var"><a href="#var" class="headerlink" title="var"></a>var</h2><p>很多语言都有<code>var</code>关键字，作用基本都一样，表示类型为动态推断类型，编译器会将<code>var</code>声明的东西根据赋值反推类型。比如：</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p1 = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> p2 = <span class="string">"2"</span>;</span><br></pre></td></tr></table></figure><p>在IDE中，这样在IDE中，能实时看到p1的static type为<code>int</code>，p2的static type为<code>String</code>。通过打印各自的runtimeType，也能看到和上述static type相似。</p><p>接下来有一点就有点意思了。如果我这样写：</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p3;   <span class="comment">//(1)</span></span><br><span class="line">p3 = <span class="number">1</span>;   <span class="comment">//(2)</span></span><br><span class="line">p3 = <span class="string">"2"</span>; <span class="comment">//(3)</span></span><br></pre></td></tr></table></figure><p>如果这样写，是可以编译、运行的（我目前的版本为Dart VM Version: 2.0.0-dev.54.0，往后的版本就不好说了）。</p><p>因为在（1）中，p3被动态推断为<code>dynamic</code>类型，所以在（2）中p3可以赋值为<code>int</code>，在（3）中可以赋值为<code>String</code>。在IDE中可以看到p3的static type为<code>dynamic</code>，而分别打印（2）、（3）时的runtimeType则分别为<code>int</code>和<code>String</code>。</p><p>所以，使用<code>var</code>最好是及时赋值，让编译器可以推断出实际类型，否则推断出类型为<code>dynamic</code>后，往后调用可能会出现不安全的情况。</p><h2 id="num"><a href="#num" class="headerlink" title="num"></a>num</h2><p>所有数字类型都继承自<code>num</code>，而数字类型也就只有2个：</p><ul><li>int - 表示任意长度的整数</li><li>double - 表示双精度浮点数</li></ul><p><code>Dart</code>中没有<code>float</code>、<code>long</code>、<code>short</code>、<code>byte</code>这些类型，统统用以上两种表示。</p><h2 id="String"><a href="#String" class="headerlink" title="String"></a>String</h2><p>字符串类型。顺带一提<code>Dart</code>也没有<code>char</code>类型。</p><p><code>Dart</code>中的字符串支持+操作符，即：</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span> str1 = <span class="string">"abc"</span>;</span><br><span class="line"><span class="built_in">String</span> str2 = str1 + <span class="string">"d"</span>; <span class="comment">//str2 = "abcd"</span></span><br></pre></td></tr></table></figure><p><code>String</code>支持在字符串中插入变量和代码，如：</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span> str1 = <span class="string">"abc"</span>;</span><br><span class="line"><span class="built_in">String</span> str2 = <span class="string">"$str1"</span>; <span class="comment">//str2 = "abc"</span></span><br><span class="line"><span class="built_in">String</span> str3 = <span class="string">"<span class="subst">$&#123;str1.compareTo(str2)&#125;</span>"</span> <span class="comment">//str3 = "true";</span></span><br></pre></td></tr></table></figure><p>字符串前面加r，可以避免转义作用，声明该字符串为原始字符串：</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span> str1 = <span class="string">"\n"</span>;<span class="comment">//输出换行</span></span><br><span class="line"><span class="built_in">String</span> str2 = <span class="string">r"\n"</span>;<span class="comment">//输出"\n"</span></span><br></pre></td></tr></table></figure><h2 id="bool"><a href="#bool" class="headerlink" title="bool"></a>bool</h2><p>布尔类型，这个不用多说。</p><p>这些就是常用的基本类型，剩下的<em>容器类型</em>迟些再说。</p><h1 id="const和final"><a href="#const和final" class="headerlink" title="const和final"></a>const和final</h1><p>const和final都用于修饰不可修改的常量，唯一的不同点是在其声明时：</p><ul><li>const声明的常量是编译时常量，即编译时就需要确定值，所以声明时需要指定明确的值。</li><li><p>final声明的常量是运行时常量，即实际运行时才确定常量的值。</p><p>例如：</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="built_in">int</span> p1 = <span class="number">1</span>; <span class="comment">//(1)</span></span><br><span class="line"><span class="keyword">final</span> <span class="built_in">int</span> p2 = <span class="number">2</span>; <span class="comment">//(2)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">int</span> p3 = p1.compareTo(p2); <span class="comment">//(3)</span></span><br><span class="line"><span class="keyword">final</span> <span class="built_in">int</span> p4 = p1.compareTo(p2); <span class="comment">//(4)</span></span><br></pre></td></tr></table></figure></li></ul><p> 在上面的代码中，（1）、（2）、（4）都可以编译运行，（3）在编译时则会提示错误。</p></div><div class="columns is-variable is-1 is-multiline is-mobile"><span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/Dart/"><i class="fa fa-hashtag" aria-hidden="true" style="padding-right:3px"></i> Dart</a></span></div><div class="columns is-mobile is-multiline article-nav"> <span class="column is-12-mobile is-half-desktop article-nav-prev"><a href="/article/dev/ca5f159a.html">The ABC of Dart Part 2</a></span> <span class="column is-12-mobile is-half-desktop article-nav-next"><a href="/article/default/4da69769.html">你可能是数据推荐的受害者</a></span></div><script>setArticleTime("article-time-53564420","Thu Jun 07 2018 12:38:12 GMT+0800")</script></article><div class="sharebox"><div class="addthis_inline_share_toolbox"></div><script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5af91abd06c0d49f"></script></div><div class="comments"><h3 class="title is-4">评论</h3><div id="valine-thread"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><script>new Valine({el:"#valine-thread",notify:!1,verify:!1,app_id:"GUCbjfNG4dzXp1OK5wLej8sB-gzGzoHsz",app_key:"8g2nRqttkIwqsgHOOsEzRvX2",placeholder:"我有一言，请诸位静听",avatar:"identicon"})</script></div></div></section><footer class="footer"><div class="container"><div class="columns content"><div class="column is-narrow has-text-centered"> &copy; 2018 Vincent Tam&nbsp; Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a href="http://github.com/ppoffice/hexo-theme-minos">Minos</a></div><div class="column is-hidden-mobile"></div></div></div></footer><script src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><div id="outdated"><h6>Your browser is out-of-date!</h6><p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update my browser now</a></p><p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p></div><script src="//cdn.bootcss.com/outdated-browser/1.1.5/outdatedbrowser.min.js"></script><script>$(document).ready(function(){outdatedBrowser({bgColor:"#f25648",color:"#ffffff",lowerThan:"flex"})})</script><script>window.FontAwesomeConfig={searchPseudoElements:!0}</script><script src="//cdn.bootcss.com/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML"></script><script>MathJax.Hub.Config({"HTML-CSS":{matchFontHeight:!1},SVG:{matchFontHeight:!1},CommonHTML:{matchFontHeight:!1}})</script><script src="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/js/lightgallery-all.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/js/jquery.justifiedGallery.min.js"></script><script>!function(e){e(document).ready(function(){"function"==typeof e.fn.lightGallery&&e(".article.gallery").lightGallery({selector:".gallery-item"}),"function"==typeof e.fn.justifiedGallery&&e(".justified-gallery").justifiedGallery()})}(jQuery)</script><script src="/js/script.js"></script><div class="searchbox ins-search"><div class="searchbox-mask"></div><div class="searchbox-container ins-search-container"><div class="searchbox-input-wrapper"> <input type="text" class="searchbox-input ins-search-input" placeholder="站内搜索"><span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span></div><div class="searchbox-result-wrapper ins-section-wrapper"><div class="ins-section-container"></div></div></div></div><script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"文章",PAGES:"页面",CATEGORIES:"分类",TAGS:"标签",UNTITLED:"(无标题)"},CONTENT_URL:"/content.json"}</script><script src="/js/insight.js"></script></body></html>