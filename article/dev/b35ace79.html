<!DOCTYPE html><html class="has-navbar-fixed-top"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Flutter先导篇 - Debug表演艺术家</title><meta name="description" content="ViTe&#39;s Blog"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="baidu-site-verification" content="QQchFmWKLy"><link rel="stylesheet" href="//cdn.bootcdn.net/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.css"><link rel="icon" href="https://vites.app/images/favicon.png"><script src="//cdn.bootcdn.net/ajax/libs/pace/1.0.2/pace.min.js"></script><link href="//cdn.bootcdn.net/ajax/libs/pace/1.0.2/themes/black/pace-theme-flash.css" rel="stylesheet"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ovo|Source+Code+Pro"><link rel="stylesheet" href="//cdn.bootcdn.net/ajax/libs/bulma/0.6.2/css/bulma.min.css"><link rel="stylesheet" href="//cdn.bootcdn.net/ajax/libs/lightgallery/1.6.10/css/lightgallery.min.css"><link rel="stylesheet" href="//cdn.bootcdn.net/ajax/libs/justifiedGallery/3.7.0/css/justifiedGallery.min.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="//use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous"><script src="//cdn.bootcdn.net/ajax/libs/moment.js/2.22.1/moment.min.js"></script><script>function setArticleTime(e,t){var d=moment(t),n=moment().diff(d,"days",!0);document.getElementsByClassName(e)[0].innerHTML=7<n?d.format("YYYY年MM月DD日 HH:mm:ss"):d.fromNow()}!function(e,t){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?t(require("../moment")):"function"==typeof define&&define.amd?define(["../moment"],t):t(e.moment)}(this,function(e){"use strict";return e.defineLocale("zh-cn",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(e,t){return 12===e&&(e=0),"凌晨"===t||"早上"===t||"上午"===t?e:"下午"===t||"晚上"===t?e+12:11<=e?e:e+12},meridiem:function(e,t,d){var n=100*e+t;return n<600?"凌晨":n<900?"早上":n<1130?"上午":n<1230?"中午":n<1800?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:"[下]ddddLT",lastDay:"[昨天]LT",lastWeek:"[上]ddddLT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(日|月|周)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";case"M":return e+"月";case"w":case"W":return e+"周";default:return e}},relativeTime:{future:"%s内",past:"%s前",s:"几秒",ss:"%d 秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},week:{dow:1,doy:4}})})</script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?40c23cf929965ff7dcc44d0e695ed794";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script></head><body><nav class="navbar is-transparent is-fixed-top navbar-main" role="navigation" aria-label="main navigation"><div class="container"><div class="navbar-brand"> <a class="navbar-item" href="/" style="padding:0 3rem 0 1rem"><img src="/images/logo.png" alt=""></a><div class="navbar-burger"><span></span><span></span><span></span></div></div><div class="navbar-menu navbar-start"> <a class="navbar-item" href="/archives">Archives</a> <a class="navbar-item" href="/categories">Categories</a> <a class="navbar-item" href="/tags">Tags</a> <a class="navbar-item" href="/about">About</a></div><div class="navbar-menu navbar-end"><a class="navbar-item search" href="javascript:;"><i class="fas fa-search"></i></a><div class="navbar-item is-hoverable has-dropdown is-hidden-mobile is-hidden-tablet-only"><a class="navbar-item toc"><i class="fa fa-list"></i></a><div class="navbar-dropdown is-right"> <a class="navbar-item" href="#应用的基础构成">1 应用的基础构成</a><hr class="navbar-divider"> <a class="navbar-item" href="#页面跳转">2 页面跳转</a><hr class="navbar-divider"> <a class="navbar-item" href="#轻量化Widget">3 轻量化Widget</a><hr class="navbar-divider"> <a class="navbar-item" href="#State和StatefulWidget">4 State和StatefulWidget</a><hr class="navbar-divider"> <a class="navbar-item" href="#Parent-Widget和Child-Widget之间的通信">5 Parent Widget和Child Widget之间的通信</a></div></div><a class="navbar-item" href="https://github.com/vitess"><i class="fab fa-github"></i></a><a class="navbar-item" href="https://weibo.com/2373803622"><i class="fab fa-weibo"></i></a><a class="navbar-item" href="mailto:vite@outlook.com"><i class="fa fa-envelope-square"></i></a></div></div></nav><section class="section"><div class="container"><article class="article content gallery" itemscope itemprop="blogPost"><h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name"> Flutter先导篇</h1><div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile"><span class="column is-narrow"><time class="article-time-b35ace79" datetime="2018-11-02T03:08:50.000Z" itemprop="datePublished"></time></span><span class="column is-narrow article-category"><i class="far fa-folder"></i> <a class="article-category-link" href="/categories/dev/">开发</a></span></div><div class="article-entry is-size-6-mobile" itemprop="articleBody"><p>Flutter使用<code>Dart</code>作为开发语言，在开发理念上也是偏向于网页开发的（虽然我没开发过网页）。</p><h1 id="应用的基础构成"><a href="#应用的基础构成" class="headerlink" title="应用的基础构成"></a>应用的基础构成</h1><p>Flutter的执行起点为<code>main()</code>函数，然后通过<code>runApp()</code>方法启动页面。</p><p>目前Flutter提供了两个App类，分别为安卓风格的<code>MaterialApp</code>和IOS风格的<code>CupertinoApp</code>，一般<code>runApp()</code>函数都是传入这两个App类的实例。</p><p>App类有点像Android中的<code>Application</code>，但它承载了更多的功能，比如设置应用主题、应用在后台列表中的颜色、名称等。值得一提的是，App类也属于<code>Widget</code>，所以按<code>Widget</code>的理念去理解即可。</p><a id="more"></a><p>通过App类的<code>home</code>参数，我们传入一个Widget，即表示我们在Flutter的首页所显示的内容就是该Widget。一般而言，我们会传入<code>Scaffold</code>作为App类的<code>home</code>。<br>在Flutter中，每个页面都由<code>Scaffold</code>构成（或者说承载），类似于Android中的Activity。<code>Scaffold</code>中可以设置一个页面的app bar、bottom sheet等，其中最主要的是<code>widget</code>类型的<code>body</code>参数，可以理解为类似HTML中的<code>&lt;body&gt;</code>标签，此处显示的就是当前页面的本体。</p><p>所以一个Flutter的启动链条，就是：</p><blockquote><p>main.dart –&gt; main() –&gt; 调用runApp() –&gt; 生成App类 –&gt; home参数传入生成的Scaffold实例 –&gt; body参数传入自己实现的页面(widget)</p></blockquote><h1 id="页面跳转"><a href="#页面跳转" class="headerlink" title="页面跳转"></a>页面跳转</h1><p>要在Flutter中跳转到另一个页面，则需要通过路由<code>Navigator</code>实现。</p><p>在Android中也有页面路由的概念，但是一般是自己实现的。<code>Navigator</code>更类似于后台维护一个页面的栈（或一个map）。</p><p>上面说到，每个页面都由<code>Scaffold</code>承载。而为了使用<code>Navigator</code>，需要在新页面的外层封装一个<code>PageRoute</code>，这个<code>PageRoute</code>类似于我们使用容器去保存一些数据时，为了方便管理、设置不同属性，会为数据提供一个包装类Wrapper一样。在不同的App下有不同的<code>PageRoute</code>，比如在<code>Material</code>下就用<code>MaterialPageRoute</code>。</p><p>当我们要跳转到第二个页面时，只需要调用<code>Navigator.push()</code>方法即可，其内部会记录各页面之前的跳转顺序，所以我们按Back键回退时，会自动回到第一个页面。</p><h1 id="轻量化Widget"><a href="#轻量化Widget" class="headerlink" title="轻量化Widget"></a>轻量化Widget</h1><p>在Android中，创建一个控件代价不算大，但如果我们要刷新一个控件，我们更倾向于对控件的参数、内容进行更改，而不是删除再重新创建一个。</p><p>Flutter引入了万物皆Widget的概念，即所有的内容都是一层控件。</p><p>Flutter对Widget的创建开销很小，而且会在其重新创建时与旧的Widget进行比较，仅对差异部分进行重绘。所以Flutter和Android原生的开发理念不同——Android依然遵循着万物皆对象的概念，其控件相对之下显得略“重”，鼓励我们复用、刷新控件来达到数据更新显示；而Flutter鼓励我们在数据更新时直接重建Widget，不需要考虑new一个Widget的开销问题。</p><h1 id="State和StatefulWidget"><a href="#State和StatefulWidget" class="headerlink" title="State和StatefulWidget"></a>State和StatefulWidget</h1><p>Flutter的Widget分为两种：<code>StatelessWidget</code>和<code>StatefulWidget</code>，前者表示不会变更的控件，比如一段不会变的文字、图标等；后者表示其会根据数据、事件动态刷新变更，所以它需要配合<code>State</code>一起使用。</p><p><code>State</code>和<code>StatefulWidget</code>相互绑定在一起。创建<code>StatefulWidget</code>时，将调用<code>createState()</code>创建其指定的<code>State</code>。其指定的<code>State</code>只会创建一次，内部变量会一直在Widget Tree销毁前保存着。<br><code>setState()</code>函数只会让<code>State</code>重新build其绑定的Widget，不会再创建<code>State</code>。</p><h1 id="Parent-Widget和Child-Widget之间的通信"><a href="#Parent-Widget和Child-Widget之间的通信" class="headerlink" title="Parent Widget和Child Widget之间的通信"></a>Parent Widget和Child Widget之间的通信</h1><p>按照Flutter的官方说法，Child Widget通过监听函数(callback)向上通知Parent Widget，Parent Widget通过监听函数收到通知后，调用<code>setState()</code>方法改变数据状态，然后重新创建Child Widget。</p><p>简单，粗暴，一切归于重建，遇事不决，先重建Widget再说。</p></div><div class="columns is-variable is-1 is-multiline is-mobile"><span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/Flutter/"><i class="fa fa-hashtag" aria-hidden="true" style="padding-right:3px"></i> Flutter</a></span></div><div class="columns is-mobile is-multiline article-nav"> <span class="column is-12-mobile is-half-desktop article-nav-prev"><a href="/article/dev/64bbb612.html">RxJava的一些线程问题</a></span> <span class="column is-12-mobile is-half-desktop article-nav-next"><a href="/article/dev/9d9111ff.html">RecyclerView重写ItemAnimator导致的Bug</a></span></div><script>setArticleTime("article-time-b35ace79","Fri Nov 02 2018 11:08:50 GMT+0800")</script></article><div class="sharebox"><div class="addthis_inline_share_toolbox"></div><script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5af91abd06c0d49f"></script></div><div class="comments"><h3 class="title is-4">评论</h3><div id="valine-thread"></div><script src="//unpkg.com/valine/dist/Valine.min.js"></script><script>new Valine({el:"#valine-thread",notify:!1,verify:!1,app_id:"GUCbjfNG4dzXp1OK5wLej8sB-gzGzoHsz",app_key:"8g2nRqttkIwqsgHOOsEzRvX2",placeholder:"我有一言，请诸位静听",avatar:"identicon"})</script></div></div></section><footer class="footer"><div class="container"><div class="columns content"><div class="column is-narrow has-text-centered"> &copy; 2022 Vincent Tam&nbsp; Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a href="http://github.com/ppoffice/hexo-theme-minos">Minos</a></div><div class="column is-hidden-mobile"></div></div></div></footer><script src="//cdn.bootcdn.net/ajax/libs/jquery/3.3.1/jquery.min.js"></script><div id="outdated"><h6>Your browser is out-of-date!</h6><p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update my browser now</a></p><p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p></div><script src="//cdn.bootcdn.net/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.css"></script><script>$(document).ready(function(){outdatedBrowser({bgColor:"#f25648",color:"#ffffff",lowerThan:"flex"})})</script><script>window.FontAwesomeConfig={searchPseudoElements:!0}</script><script>window.MathJax={chtml:{matchFontHeight:!1},options:{ignoreHtmlClass:"tex2jax_ignore",processHtmlClass:"tex2jax_process"},tex:{autoload:{color:[],colorV2:["color"]},packages:{"[+]":["noerrors"]}},loader:{load:["input/asciimath","[tex]/noerrors"]}}</script><script src="//cdn.bootcdn.net/ajax/libs/mathjax/3.0.5/es5/tex-mml-chtml.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/js/lightgallery-all.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/js/jquery.justifiedGallery.min.js"></script><script>!function(e){e(document).ready(function(){"function"==typeof e.fn.lightGallery&&e(".article.gallery").lightGallery({selector:".gallery-item"}),"function"==typeof e.fn.justifiedGallery&&e(".justified-gallery").justifiedGallery()})}(jQuery)</script><script src="/js/script.js"></script><div class="searchbox ins-search"><div class="searchbox-mask"></div><div class="searchbox-container ins-search-container"><div class="searchbox-input-wrapper"> <input type="text" class="searchbox-input ins-search-input" placeholder="站内搜索"><span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span></div><div class="searchbox-result-wrapper ins-section-wrapper"><div class="ins-section-container"></div></div></div></div><script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"文章",PAGES:"页面",CATEGORIES:"分类",TAGS:"标签",UNTITLED:"(无标题)"},CONTENT_URL:"/content.json"}</script><script src="/js/insight.js"></script></body></html>